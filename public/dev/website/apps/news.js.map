{"version":3,"file":"news.js","sources":["../../../../resources/js/tiers/website/apps/news.vue","../../../../resources/js/tiers/website/startup/news.ts"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { nextTick, onMounted } from \"vue\";\r\nimport { api } from \"@/lib/api\";\r\nimport { ref } from \"vue\";\r\nimport $ from \"jquery\";\r\n\r\nconst projects = ref<any>([]);\r\nconst currentPage = ref(1);\r\nconst totalPages = ref(0);\r\nconst currentCid = ref('');\r\n\r\nconst init = () => {\r\n    const items = document.querySelectorAll('.category-link');\r\n    items.forEach((item: any) => {\r\n        item.addEventListener('click', (e: any) => {\r\n            e.preventDefault();\r\n            const loadMoreButton = document.getElementById('load-more');\r\n            if (loadMoreButton) {\r\n                loadMoreButton.innerText = 'load more...';\r\n                loadMoreButton.style.backgroundColor = '#13a041';\r\n                loadMoreButton.style.color = 'white';\r\n            }\r\n            items.forEach((ele: any) => {\r\n                if (ele.classList.contains('active')) {\r\n                    ele.classList.remove('active')\r\n                }\r\n            })\r\n            item.classList.add('active')\r\n            currentCid.value = item.dataset.cid;\r\n            currentPage.value = 1; // Reset current page when changing category\r\n            loadProjects(currentCid.value, currentPage.value);\r\n        })\r\n    })\r\n    items.item(0)?.click()\r\n}\r\n\r\nconst loadProjects = (cid = '', page = 1) => {\r\n    api().get(`/news?expand=local,categories,categories.local&sort=position,local.title&cid=${cid}&per-page=2&page=${page}`).then(({ data }: any) => {\r\n        $('.project-item').fadeOut(200, function () {\r\n            if (page === 1) {\r\n                projects.value = data.slice(0, 2); // Load only 2 projects initially\r\n            } else {\r\n                const startIndex = (page - 1) * 2;\r\n                const endIndex = startIndex + 2;\r\n                projects.value = [...projects.value, ...data.slice(startIndex, endIndex)]; // Load the next 2 projects\r\n            }\r\n            totalPages.value = Math.ceil(data.length / 2);\r\n            nextTick(() => {\r\n                $('.project-item').fadeIn(200);\r\n            })\r\n        })\r\n    })\r\n}\r\n\r\nconst loadMore = () => {\r\n    currentPage.value++;\r\n    loadProjects(currentCid.value, currentPage.value);\r\n    if (currentPage.value >= totalPages.value) {\r\n        const loadMoreButton = document.getElementById('load-more');\r\n        if (loadMoreButton) {\r\n            loadMoreButton.innerText = 'No more posts available';\r\n            loadMoreButton.style.backgroundColor = 'transparent';\r\n            loadMoreButton.style.color = 'black';\r\n            loadMoreButton.disabled = true;\r\n        }\r\n    }\r\n}\r\n\r\nconst getNextId = (currentIndex: number) => {\r\n    if (currentIndex < projects.value.length - 1) {\r\n        return projects.value[currentIndex + 1].id;\r\n    } else if (currentIndex === projects.value.length - 1 && currentPage.value < totalPages.value) {\r\n        return projects.value[0].id;\r\n    }\r\n    return '';\r\n}\r\n\r\n\r\nonMounted(() => {\r\n    init();\r\n})\r\n</script>\r\n\r\n<template>\r\n    <section class=\"project-item\">\r\n        <div class=\"items\">\r\n            <div class=\"row itemContainer\" id=\"itemContainer\">\r\n                <div class=\"col-md-6 item news pb-5 bg-transparent\" v-for=\"(content, index) in projects\" :key=\"content.id\">\r\n                    <div class=\"card rounded-0 border-0 card bg-transparent\">\r\n                        <a :href=\"'default/content?id=' + content.id + '&cid=' + content.categories.at(0).id\">\r\n                            <img :src=\"content.attrs?.image?.url\">\r\n                        </a>\r\n                        <div class=\"deadline\">\r\n                            <div class=\"date d-flex justify-content-start\">{{ content.local.attrs.date }}</div>\r\n                            <div class=\"type text-capitalize d-flex justify-content-end\">\r\n                                <div class=\"dots\">\r\n                                    <span class=\"dot dot-sm dot-success\"></span>\r\n                                </div>\r\n                                <span>{{ content.categories.at(0).local.title }}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"card-body\">\r\n                            <h5 class=\"card-title text-capitalize\">{{ content.local.title }}</h5>\r\n                            <p class=\"card-text text-muted\">{{ content.local.excerpt }}</p>\r\n                            <a :href=\"'default/content?id=' + content.id + '&cid=' + content.categories.at(0).id\"\r\n                                class=\"btn btn-discover\">Read More</a>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"row text-center pb-5\">\r\n            <div class=\"col-sm-12\">\r\n                <div class=\"btn__wrapper\">\r\n                    <button @click=\"loadMore\" :disabled=\"currentPage >= totalPages\" class=\"btn btn-load-more\"\r\n                        id=\"load-more\">Load more...</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>","/**\n * news.vue Startup File\n *\n * @project kaizee\n * @company Codendot <https://codendot.com>\n * @author Jawdat Sobh <jawdat@codendot.com>\n * @since Thursday, October 26, 2023 at 08:58 AM GMT+3\n *\n */\n\nimport { createApp } from \"@/lib/app\"\nimport AppComponent from \"../apps/news.vue\"\nimport bootstrap from \"../bootstrap/news\"\n\nconst app = createApp(\"news\", AppComponent)\nbootstrap(app)\napp.mount()\n"],"names":["projects","ref","currentPage","totalPages","currentCid","init","items","item","e","loadMoreButton","ele","loadProjects","_a","cid","page","api","data","$","startIndex","endIndex","nextTick","loadMore","onMounted","app","createApp","AppComponent"],"mappings":"qrCAMM,MAAAA,EAAWC,EAAS,CAAA,CAAE,EACtBC,EAAcD,EAAI,CAAC,EACnBE,EAAaF,EAAI,CAAC,EAClBG,EAAaH,EAAI,EAAE,EAEnBI,EAAO,IAAM,OACT,MAAAC,EAAQ,SAAS,iBAAiB,gBAAgB,EAClDA,EAAA,QAASC,GAAc,CACpBA,EAAA,iBAAiB,QAAUC,GAAW,CACvCA,EAAE,eAAe,EACX,MAAAC,EAAiB,SAAS,eAAe,WAAW,EACtDA,IACAA,EAAe,UAAY,eAC3BA,EAAe,MAAM,gBAAkB,UACvCA,EAAe,MAAM,MAAQ,SAE3BH,EAAA,QAASI,GAAa,CACpBA,EAAI,UAAU,SAAS,QAAQ,GAC3BA,EAAA,UAAU,OAAO,QAAQ,CACjC,CACH,EACIH,EAAA,UAAU,IAAI,QAAQ,EAChBH,EAAA,MAAQG,EAAK,QAAQ,IAChCL,EAAY,MAAQ,EACPS,EAAAP,EAAW,MAAOF,EAAY,KAAK,CAAA,CACnD,CAAA,CACJ,GACKU,EAAAN,EAAA,KAAK,CAAC,IAAN,MAAAM,EAAS,OAAM,EAGnBD,EAAe,CAACE,EAAM,GAAIC,EAAO,IAAM,CACzCC,IAAM,IAAI,gFAAgFF,CAAG,oBAAoBC,CAAI,EAAE,EAAE,KAAK,CAAC,CAAE,KAAAE,CAAA,IAAgB,CAC7IC,EAAE,eAAe,EAAE,QAAQ,IAAK,UAAY,CACxC,GAAIH,IAAS,EACTd,EAAS,MAAQgB,EAAK,MAAM,EAAG,CAAC,MAC7B,CACG,MAAAE,GAAcJ,EAAO,GAAK,EAC1BK,EAAWD,EAAa,EACrBlB,EAAA,MAAQ,CAAC,GAAGA,EAAS,MAAO,GAAGgB,EAAK,MAAME,EAAYC,CAAQ,CAAC,CAC5E,CACAhB,EAAW,MAAQ,KAAK,KAAKa,EAAK,OAAS,CAAC,EAC5CI,EAAS,IAAM,CACTH,EAAA,eAAe,EAAE,OAAO,GAAG,CAAA,CAChC,CAAA,CACJ,CAAA,CACJ,CAAA,EAGCI,EAAW,IAAM,CAGf,GAFQnB,EAAA,QACCS,EAAAP,EAAW,MAAOF,EAAY,KAAK,EAC5CA,EAAY,OAASC,EAAW,MAAO,CACjC,MAAAM,EAAiB,SAAS,eAAe,WAAW,EACtDA,IACAA,EAAe,UAAY,0BAC3BA,EAAe,MAAM,gBAAkB,cACvCA,EAAe,MAAM,MAAQ,QAC7BA,EAAe,SAAW,GAElC,CAAA,EAaJ,OAAAa,EAAU,IAAM,CACPjB,GAAA,CACR,u0BClEKkB,EAAMC,EAAU,OAAQC,CAAY,EAE1CF,EAAI,MAAM"}